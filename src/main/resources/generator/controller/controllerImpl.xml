<?xml version="1.0" encoding="utf-8"?>
<template>
  <name>controllerImpl</name>
  <filePath>src/main/java/${packageName}/${moduleName}/controller/${versionName}/impl</filePath>
  <fileName>${controllerName}ApiController.java</fileName>
  <content><![CDATA[
package ${packageName}<#if moduleName != "">.${moduleName}</#if>.controller.${versionName}.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;

import com.fasterxml.jackson.core.type.TypeReference;
import ${packageName}<#if moduleName != "">.${moduleName}</#if>.controller.base.BaseController;
import ${packageName}<#if moduleName != "">.${moduleName}</#if>.common.Constants;
<#list importImplPackageList as package>
import ${package};
</#list>
import ${packageName}<#if moduleName != "">.${moduleName}</#if>.controller.${versionName}.${controllerName}Api;

/** 
 * 
 * @author TitanCode2
 * @version  
 * @since JDK 1.8 
 */
@Controller
public class ${controllerName}ApiController extends BaseController implements ${controllerName}Api {

  <#list appServiceNameList as appServiceName>
  @Autowired
  private ${appServiceName.serviceName} ${appServiceName.serviceNameAttr};
  </#list>
  
  <#list apiObjList as apiObj>
  /**
   * ${apiObj.summary}
   */
  @Override
  public ResponseEntity<ResultDTO> ${apiObj.name}(<#list apiObj.apiParam as apiParam>${apiParam.formAnnotation} ${apiParam.paramObj} ${apiParam.name}<#if (apiParam_has_next)>, </#if></#list>) {
    <#if apiObj.apiType == "general">
    return new ResponseEntity<ResultDTO>(new ${apiObj.responseObjNameNoPack}${apiObj.responseObjGenericNoPack}().message("成功").statusCode(Constants.SUCCESS_API_CODE), HttpStatus.OK);
    </#if>
    <#if apiObj.apiType == "page">
    return new ResponseEntity<ResultDTO>(${apiObj.attrServiceNameNoPack}.get${apiObj.tableAttrNameCap}List(searchParams)
        .message("成功").statusCode(Constants.SUCCESS_API_CODE), HttpStatus.OK);
    </#if>
    <#if apiObj.apiType == "insert">
    ${apiObj.attrServiceNameNoPack}.insert${apiObj.tableAttrNameCap}(${apiObj.tableAttrName});
    return new ResponseEntity<ResultDTO>(new ResultDTO().message("成功").statusCode(Constants.SUCCESS_API_CODE), HttpStatus.OK);
    </#if>
    <#if apiObj.apiType == "update">
    ${apiObj.attrServiceNameNoPack}.update${apiObj.tableAttrNameCap}(${apiObj.tableAttrName});
    return new ResponseEntity<ResultDTO>(new ResultDTO().message("成功").statusCode(Constants.SUCCESS_API_CODE), HttpStatus.OK);
    </#if>
    <#if apiObj.apiType == "delete">
    ${apiObj.attrServiceNameNoPack}.delete${apiObj.tableAttrNameCap}(${apiObj.tableAttrName}Id);
    return new ResponseEntity<ResultDTO>(new ResultDTO().message("成功").statusCode(Constants.SUCCESS_API_CODE), HttpStatus.OK);
    </#if>
    <#if apiObj.apiType == "jsonschema">
    return new ResponseEntity<ResultDTO>(new ResultJsonSchemaDTO()
        .jsonSchema(this.getJsonSchemaByJavaType(new TypeReference${apiObj.responseObjGenericNoPack}() {})).message("成功").statusCode(Constants.SUCCESS_API_CODE), HttpStatus.OK);
    </#if>
    <#if apiObj.apiType == "show">
    return new ResponseEntity<ResultDTO>(new ${apiObj.responseObjNameNoPack}()
        .${apiObj.tableAttrName}(${apiObj.attrServiceNameNoPack}.findById(${apiObj.tableAttrName}Id)).message("成功").statusCode(Constants.SUCCESS_API_CODE), HttpStatus.OK);
    </#if>
  }
  </#list>
  
}
]]>
  </content>
</template>